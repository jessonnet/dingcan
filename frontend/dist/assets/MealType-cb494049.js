import{i as I,r,o as k,c as j,b as t,w as a,d as p,m as V,E as u,a as _,f as n,t as w,j as E}from"./index-cf2541ee.js";import{_ as G}from"./_plugin-vue_export-helper-c27b6911.js";const H={class:"meal-type-container"},J={class:"card-header"},K={class:"meal-type-content"},L={class:"dialog-footer"},O={class:"dialog-footer"},P={__name:"MealType",setup(Q){const x=p([]),c=p(!1),y=p(null),d=p({name:"",price:0,status:1}),v=p(!1),b=p(null),i=p({id:"",name:"",price:0,status:1}),M={name:[{required:!0,message:"请输入餐食类型",trigger:"change"}],price:[{required:!0,message:"请输入价格",trigger:"change"}],status:[{required:!0,message:"请选择状态",trigger:"change"}]},g=async()=>{try{const o=await V.get("/api/admin/meal-type/list");o.success?x.value=o.data:u.error("加载餐食类型失败")}catch{u.error("加载餐食类型失败，请检查网络连接")}},B=async()=>{y.value&&await y.value.validate(async o=>{if(o)try{const e={...d.value,status:d.value.status?1:0},s=await V.post("/api/admin/meal-type/add",e);s.success?(u.success(s.message),c.value=!1,d.value={name:"",price:0,status:1},y.value.resetFields(),g()):u.error(s.message)}catch{u.error("添加失败，请检查网络连接")}})},R=o=>{i.value={id:o.id,name:o.name,price:o.price,status:o.status},v.value=!0},q=async()=>{b.value&&await b.value.validate(async o=>{if(o)try{const e={...i.value,status:i.value.status?1:0},s=await V.put("/api/admin/meal-type/update",e);s.success?(u.success(s.message),v.value=!1,g()):u.error(s.message)}catch{u.error("编辑失败，请检查网络连接")}})},A=async o=>{try{const e=await V.delete(`/api/admin/meal-type/delete/${o}`);e.success?(u.success(e.message),g()):u.error(e.message)}catch{u.error("删除失败，请检查网络连接")}};return I(()=>{g()}),(o,e)=>{const s=r("el-button"),m=r("el-table-column"),C=r("el-tag"),N=r("el-table"),S=r("el-card"),T=r("el-input"),f=r("el-form-item"),U=r("el-input-number"),D=r("el-switch"),F=r("el-form"),$=r("el-dialog");return k(),j("div",H,[t(S,null,{header:a(()=>[_("div",J,[e[12]||(e[12]=_("span",null,"餐食类型管理",-1)),t(s,{type:"primary",onClick:e[0]||(e[0]=l=>c.value=!0)},{default:a(()=>[...e[11]||(e[11]=[n("添加餐食类型",-1)])]),_:1})])]),default:a(()=>[_("div",K,[t(N,{data:x.value,style:{width:"100%"}},{default:a(()=>[t(m,{prop:"id",label:"ID",width:"80"},{default:a(l=>[n(w(l.row.id),1)]),_:1}),t(m,{prop:"name",label:"餐食类型",width:"180"},{default:a(l=>[n(w(l.row.name),1)]),_:1}),t(m,{prop:"price",label:"价格",width:"100"},{default:a(l=>[n(" ¥"+w(l.row.price),1)]),_:1}),t(m,{prop:"status",label:"状态",width:"100"},{default:a(l=>[l.row.status===1?(k(),E(C,{key:0,type:"success"},{default:a(()=>[...e[13]||(e[13]=[n("启用",-1)])]),_:1})):(k(),E(C,{key:1,type:"danger"},{default:a(()=>[...e[14]||(e[14]=[n("禁用",-1)])]),_:1}))]),_:1}),t(m,{prop:"createdAt",label:"创建时间",width:"200"},{default:a(l=>[n(w(l.row.createdAt),1)]),_:1}),t(m,{label:"操作",width:"150"},{default:a(l=>[t(s,{type:"primary",size:"small",onClick:z=>R(l.row)},{default:a(()=>[...e[15]||(e[15]=[n("编辑",-1)])]),_:1},8,["onClick"]),t(s,{type:"danger",size:"small",onClick:z=>A(l.row.id)},{default:a(()=>[...e[16]||(e[16]=[n("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])])]),_:1}),t($,{modelValue:c.value,"onUpdate:modelValue":e[5]||(e[5]=l=>c.value=l),title:"添加餐食类型",width:"500px"},{footer:a(()=>[_("span",L,[t(s,{onClick:e[4]||(e[4]=l=>c.value=!1)},{default:a(()=>[...e[17]||(e[17]=[n("取消",-1)])]),_:1}),t(s,{type:"primary",onClick:B},{default:a(()=>[...e[18]||(e[18]=[n("确定",-1)])]),_:1})])]),default:a(()=>[t(F,{model:d.value,rules:M,ref_key:"addMealTypeFormRef",ref:y,"label-width":"100px"},{default:a(()=>[t(f,{label:"餐食类型",prop:"name"},{default:a(()=>[t(T,{modelValue:d.value.name,"onUpdate:modelValue":e[1]||(e[1]=l=>d.value.name=l),placeholder:"输入餐食类型"},null,8,["modelValue"])]),_:1}),t(f,{label:"价格",prop:"price"},{default:a(()=>[t(U,{modelValue:d.value.price,"onUpdate:modelValue":e[2]||(e[2]=l=>d.value.price=l),min:0,step:.01,precision:2,placeholder:"输入价格"},null,8,["modelValue"])]),_:1}),t(f,{label:"状态",prop:"status"},{default:a(()=>[t(D,{modelValue:d.value.status,"onUpdate:modelValue":e[3]||(e[3]=l=>d.value.status=l),"active-text":"启用","inactive-text":"禁用"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),t($,{modelValue:v.value,"onUpdate:modelValue":e[10]||(e[10]=l=>v.value=l),title:"编辑餐食类型",width:"500px"},{footer:a(()=>[_("span",O,[t(s,{onClick:e[9]||(e[9]=l=>v.value=!1)},{default:a(()=>[...e[19]||(e[19]=[n("取消",-1)])]),_:1}),t(s,{type:"primary",onClick:q},{default:a(()=>[...e[20]||(e[20]=[n("确定",-1)])]),_:1})])]),default:a(()=>[t(F,{model:i.value,rules:M,ref_key:"editMealTypeFormRef",ref:b,"label-width":"100px"},{default:a(()=>[t(f,{label:"餐食类型",prop:"name"},{default:a(()=>[t(T,{modelValue:i.value.name,"onUpdate:modelValue":e[6]||(e[6]=l=>i.value.name=l),placeholder:"输入餐食类型"},null,8,["modelValue"])]),_:1}),t(f,{label:"价格",prop:"price"},{default:a(()=>[t(U,{modelValue:i.value.price,"onUpdate:modelValue":e[7]||(e[7]=l=>i.value.price=l),min:0,step:.01,precision:2,placeholder:"输入价格"},null,8,["modelValue"])]),_:1}),t(f,{label:"状态",prop:"status"},{default:a(()=>[t(D,{modelValue:i.value.status,"onUpdate:modelValue":e[8]||(e[8]=l=>i.value.status=l),"active-text":"启用","inactive-text":"禁用"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}},Y=G(P,[["__scopeId","data-v-a02e8211"]]);export{Y as default};
